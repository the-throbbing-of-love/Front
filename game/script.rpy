# init python:
#     import requests

#     def send_to_raspberry_pi():
#         url = 'http://10.150.151.164:5000'  # 서버의 GET 엔드포인트

#         try:
#             response = requests.get(url)
#             response.raise_for_status()  # HTTP 오류가 발생하면 예외 발생
#             received_value = response.text  # 문자열로 응답 받기
#             renpy.notify("서버에서 받은 값: " + received_value)
#         except Exception as e:
#             renpy.notify("서버에 연결할 수 없습니다.")
#             renpy.error(str(e))


init python:
    def set_player_name():
        global pn
        pn = renpy.input("당신의 이름을 입력하세요:")

        # 이름이 비어 있을 경우 기본 이름으로 설정
        if pn == "":
            pn = "김주인"

# 캐릭터 호감도 초기화
$ f_hana_love = 0
$ f_ari_love = 0
$ f_mirae_love = 0

# 플레이어의 심박수 측정
label measure_heart_rate:
    # 초기 심박수 측정
    $ player_initial_heart_rate = renpy.call_in_new_context("measure_heart_rate")
    return
#배경사진
image white =  "images/background/white.png"

#플레이어
define a = Character('a선배', color="#c8ffc8") #활발한 여선배
define m = Character('김미래', color="#c8ffc8") #동급생 츤데레 여학생
define a = Character('금아리', color="#c8ffc8") #동급생 신비주의 여학생
define s = Character('시스템') #힌트&설명
define friend = Character('학동운') #연인관계의 도움친구
define pn = ""
define q = Character('???') #첫 등장


#캐릭터
image a_base = im.Scale("images/charater/a/a_base.png", 950, 1000)




label start:
    # $ send_to_raspberry_pi()
    jump first_day
# 1일차
label first_day:
    
    scene black

    #영상 있으면 만들기

    s "이 게임은 사용자의 심박수의 증가&감소에따라 선택지가 달라지니 이 포인트를 잘 활용해서 플레이하시길 바랍니다."

    s "재밌게 플레이해주세요."

    "주인공은 심박동 센서를 통해 자신의 심박수를 측정했다."
    # $ player_heart_rate = renpy.call_in_new_context("measure_heart_rate")  # 심박수 측정

    # Chapter 1: 입학식
    scene bg_school_event
    "봄의 따뜻한 햇살이 비치는 교정에 부스들이 가득 펼쳐져 있었다."
    "신입생인 나는 새로 시작하는 대학 생활에 설레기도 하고, 한편으론 낯선 분위기에 긴장도 되었다."
    
    # 친구 등장
    show friend at right with dissolve
    friend "야, 무슨 동아리 들어갈 거야? 부스들 보니까 진짜 다양하더라."
    
    "친구의 말에 나는 주변을 둘러보았다. 각양각색의 동아리들이 자신들의 활동을 자랑하고 있었다."
    "스포츠, 학술, 문화... 선택지가 많아 어떤 동아리를 들어가야 할지 고민이 깊어졌다."

    # 선배 등장
    show a_base at left with dissolve
    a "안녕! 신입생 맞지? 동아리 알아보고 있어?"

    # 첫 대화 선택지
    menu:
        #증가
        "조금 둘러보고 있어요":
            "부스 구경 중이던 내게 선배가 친근하게 다가왔다."
            a "그럼 우리 사진 동아리는 어때? 다양한 활동도 많고 재밌어!"
            "나는 사진 동아리에 대한 이야기를 들으며 조금씩 흥미가 생겼다."
            
            menu:
                "사진 동아리가 정말 그렇게 재미있나요?":
                    "선배는 눈을 빛내며 고개를 끄덕였다."
                    a "그럼! 단순히 사진 찍는 것만이 아니라, 전시회도 열고 전국 대회도 참여해!"
                    "선배의 열정적인 설명에 나는 점점 더 끌렸다."
                
                "괜찮아 보이네요, 참가할게요.":
                    "나는 사진 동아리에 참가하기로 결정했다."
                    a "좋아! 그럼 참가서 작성해줘. 잘 생각했어!"
                    "내가 참가서를 작성하는 동안 선배는 조언과 격려의 말을 아끼지 않았다."
                
        #감소
        "네, 하지만 뭐가 좋을지 모르겠네요":
            "막연히 둘러보고 있던 내게 선배가 추천을 시작했다."
            a "음, 사진 동아리 어때? 여행도 가고 추억도 남길 수 있어."
            menu:
                "사진 동아리 말고 다른 동아리도 추천해 주실 수 있나요?":
                    a "흠... 물론 다른 동아리도 많지. 하지만 사진 동아리는 너의 젊음을 기록하는 데 딱이야."
                    "나는 선배가 말하는 '기록'이라는 단어가 마음에 와닿았다."
                
                "다른 동아리도 둘러보고 결정할게요.":
                    a "알겠어. 그래도 마음이 바뀌면 언제든 우리 동아리로 와!"
                    "나는 아직 결정을 내리지 않고 다른 부스를 둘러보기로 했다."

    "나는 선배의 말에 이끌려 사진 동아리에 흥미가 생겼다."
    extend "그렇기에 나는 사진동아리에 들어가겠다고 다짐했다"
    # 동아리 가입을 권유하며 선택지를 제공
    
    a "좋아! 관심 있다면 참가서 작성하고 가. 네가 관심 있으면 나중에 후회 안 할 거야!"
    menu:
        "사진 동아리에 가입한다":
            "동아리 참가서를 작성하며 선배의 기대 어린 눈빛을 느낄 수 있었다."
            show a_senior at left with dissolve
            a "잘 생각했어! 이거 꽉 채워서 작성해줘!"
            
            #이름적는 페이지
            

            a "여기에 이름을 적어줘!"
            $ set_player_name()

            # 가입 이유 확인 선택지
            "작성을 마치자 선배가 질문했다."
            a "근데 정말 하고 싶어서 작성한 거 맞아? 잠깐의 호기심만으로는 힘들 수도 있어."
            menu:
                "네, 하고 싶어서 작성했어요":
                    "내가 정말 이 동아리에 기대가 컸다는 생각에 진심을 담아 대답했다."
                    a "좋아, 그런 마음이라면 반드시 우리 동아리에 잘 어울릴 거야!"
                    "선배는 만족스러운 미소를 지으며 내 손을 힘차게 잡아주었다."
                
                "아직 잘 모르겠지만, 해보고 결정해볼게요":
                    a "그래, 해보면서 점차 느껴봐. 사진 찍는 즐거움은 경험해 봐야 알 수 있거든."
                    "선배는 격려의 말과 함께 곧 열릴 첫 모임을 기대하라며 내 어깨를 두드렸다."
            
            a "첫 모임은 다음 주 수요일 오후 6시! 장소는 동아리 방이니까 잊지 마!"
    # 집으로 가는 길
    "그렇게 입학식이 끝나고 집으로 가는 길에 들뜬 마음을 진정시키며 캠퍼스를 걷고 있었다."
    "갑자기 사람들이 모여서 환호하는 소리가 들려 발걸음을 멈췄다."
    
    # 댄스 공연 장면
    scene bg_dance_stage
    "사람들이 모여 있는 쪽으로 다가가 보니, 무대 위에서 댄스 공연이 한창이었다."
    "화려한 춤과 함께 무대를 채운 그들 중에서도 유독 눈에 띄는 선배가 있었다."
    
    # 동아리 장 등장
    show dance_leader at center with dissolve
    "그녀는 강렬한 눈빛으로 무대를 지배하며, 멋진 춤 동작을 선보이고 있었다."
    "나는 그 선배가 자꾸만 눈에 들어와 공연이 끝날 때까지 시선을 떼지 못했다."
    
    # 선배 정체 확인
    "공연이 끝난 후, 옆에 있던 친구가 그녀를 가리키며 말했다."
    friend "저 선배, 우리 학교에서 엄청 유명해! 듣자 하니, 네가 가입한 사진 동아리의 동아리 장이래!"
    
    "동아리 장이자, 그 화려한 무대 위의 주인공… 뭔가 묘하게 가슴이 두근거렸다."
    "이제 다음 주 첫 모임이 더욱 기다려지는 걸 느끼며, 나는 집으로 향했다."


# Chapter 2: 첫 동아리 모임
label chapter_2:
    
    
    scene bg_clubroom
    "드디어 사진 동아리의 첫 모임 날이 되었다. 동아리 방에 들어서자 여러 신입생과 선배들이 모여 있었다."
    
    # B 등장
    show b_classmate at right with dissolve
    b "안녕하세요! 혹시 여기가 사진 동아리 맞나요?"
    
    "들어오는 나와 동시에 동기인 B가 반갑게 인사하며 동아리 방에 들어왔다."
    
    menu:
        "B에게 친근하게 인사를 건넨다":
            "나 역시 그에게 가볍게 손을 흔들며 인사를 건넸다."
            menu:
                "동아리에 대한 기대를 이야기한다":
                    b "저도요! 새로운 사람들도 만나고, 여러 추억을 남길 수 있겠죠."
                "대학 생활에 대한 설렘을 이야기한다":
                    b "저도요! 대학 생활에서 뭔가 멋진 경험을 하고 싶었거든요."
        
        "조용히 자리에 앉는다":
            "나는 살짝 긴장한 마음을 추스르며 조용히 자리에 앉았다."
            "주변을 둘러보며, 점차 채워지는 동아리 방의 분위기에 마음이 두근거렸다."
            menu:
                "옆 사람에게 조용히 인사를 건넨다":
                    "옆에 앉은 동급생이 나를 보며 미소를 지어주었다."
                "그저 가만히 자리에 앉아있다":
                    "나는 아직 어색함을 느끼며 주변을 둘러보았다."

    # 카메라 조작 중인 선배와 조우
    show camera_senior at left with dissolve
    "방 한쪽에서는 선배가 카메라를 만지며 세팅 중이었다."
    "내가 궁금한 표정으로 바라보자 선배가 미소를 지으며 말을 걸었다."
    
    camera_senior "신입생이구나? 카메라에 관심 있니?"
    
    menu:
        "네, 배우고 싶어요.":
            "선배는 흐뭇한 표정으로 고개를 끄덕였다."
            camera_senior "좋아, 앞으로 기초부터 차근차근 알려줄 테니까 기대해!"
            menu:
                "어떤 활동을 하는지 물어본다":
                    camera_senior "촬영뿐 아니라, 전시회나 외부 활동도 많이 있어. 분명 재밌을 거야!"
                "자신의 카메라에 대해 묻는다":
                    camera_senior "이건 내가 오래 쓰던 카메라야. 너도 차츰 자신만의 카메라를 갖게 될 거야."

        "아직 잘 모르겠어요.":
            camera_senior "괜찮아, 해보면서 배워가는 거지. 처음엔 누구나 그렇거든."
            "선배는 내게 친근하게 다가오며 부담감을 덜어주려는 듯 격려의 말을 해주었다."
            menu:
                "감사 인사를 한다":
                    "나는 선배에게 감사의 미소를 보냈다."
                "조용히 고개만 끄덕인다":
                    "나는 고개를 끄덕이며 선배의 격려를 마음속에 담았다."

    # 동아리 멤버들이 다 모임
    "곧이어 동아리 방은 여러 신입생과 기존 멤버들로 가득 찼다."
    "모두가 자리를 잡고 앉자, 동아리 장인 선배가 앞으로 나와 우리를 환영했다."

    # 동아리 환영식
    show dance_leader at center with dissolve
    dance_leader "안녕, 모두들! 우리 사진 동아리에 온 걸 환영해. 나는 동아리 장이고, 앞으로 잘 부탁할게!"
    
    "환영식은 간단한 소개와 앞으로의 활동 계획, 그리고 동아리의 전통에 대한 설명으로 이루어졌다."
    "여러 선배들이 돌아가면서 자신들의 경험과 추억을 공유하며 분위기를 풀어주었다."
    
    menu:
        "환영식에 집중한다":
            "선배들의 이야기를 들으며 사진 동아리가 얼마나 다양한 활동을 해왔는지 알 수 있었다."
            "가끔 웃음이 터지기도 하고, 진지한 순간도 이어지며 분위기는 점점 훈훈해졌다."
            menu:
                "선배들의 경험에 감동한다":
                    "사진에 대한 열정이 이렇게 강렬할 줄 몰랐다."
                "활동 계획에 대해 질문한다":
                    dance_leader "좋은 질문이야! 다음 달에는 캠퍼스 사진 전시회를 열 계획이야."
        
        "옆의 동급생들과 작은 얘기를 나눈다":
            "옆에 앉은 동급생들과 가볍게 속삭이며 인사를 나누었다."
            "동아리 장의 이야기를 들으면서도, 서로의 기대와 설렘을 공유했다."
            menu:
                "동아리에 대해 얘기한다":
                    "옆에 앉은 동급생들과 동아리 활동에 대한 기대를 이야기했다."
                "친근하게 서로를 알아간다":
                    "이름과 전공을 물으며 옆에 앉은 동급생들과 친근하게 대화를 나누었다."

    # 동아리 장의 인기 비밀 발견
    "이야기가 진행되는 도중, 뒤편에서 누군가 작은 목소리로 속삭였다."
    unknown "저 선배, 축제 때 가장 예쁜 선배로 유명하잖아. 몰랐어?"
    
    "그 말에 나는 다시 동아리 장을 바라보았다. 댄스 공연에서 이미 강렬한 인상을 주었던 선배였지만, 그녀가 그렇게 유명한 인물인 줄은 몰랐다."
    "선배가 주목받는 이유가 단순한 외모 때문이 아니라, 그녀의 자신감과 열정이 만들어낸 것이란 생각이 들었다."

    # C 동급생과의 만남
    "환영식이 끝난 후, 다른 동아리 멤버들이 자유롭게 이야기를 나누고 있었다."
    "그때, 방 구석에서 혼자 앉아 있는 한 신입생이 눈에 띄었다. 그는 C라는 동급생으로 보였고, 다른 사람들과 어울리지 않고 조용히 있는 모습이 조금 특이했다."

    menu:
        "C에게 다가가 인사를 건넨다":
            "나는 용기를 내어 그에게 다가가 인사를 건넸다."
            c "…아, 안녕하세요."
            "그는 잠시 놀란 듯했지만, 차분한 표정으로 대답했다. 그의 말투에는 어딘가 신비로운 분위기가 감돌았다."
            menu:
                "C에게 동아리 활동에 대한 생각을 물어본다":
                    c "솔직히 아직은 잘 모르겠어요. 그냥... 분위기를 느껴보고 싶었을 뿐이에요."
                    "C의 대답은 마치 자신이 어떤 정체성을 찾고 있는 것처럼 느껴졌다."
                "C에게 카메라에 대해 물어본다":
                    c "아직 카메라는 잘 모르겠어요. 배워가며 생각해보려구요."
                    "C는 약간의 호기심을 보이며 말을 이어갔다."
        
        "혼자 있게 내버려둔다":
            "그가 혼자 있고 싶어 하는 것 같아서 굳이 다가가지 않고 멀리서 지켜보기로 했다."
            "그러나 그의 차분한 분위기와 시선이 계속 신경 쓰였다."
            menu:
                "다른 사람들과 더 이야기한다":
                    "나는 다른 동급생들과 계속해서 동아리에 대한 이야기를 나누었다."
                "방을 조용히 둘러본다":
                    "나는 동아리 방의 분위기를 차분히 느끼며, 앞으로의 활동을 기대하기 시작했다."

    # C와 마지막 대화
    "다들 집으로 돌아가기 전, 나는 용기를 내어 C와 마지막 대화를 나누어 보기로 했다."
    menu:
        "C에게 동아리 활동에 대해 물어본다":
            "나는 그에게 동아리에 대한 생각을 물었다."
            c "솔직히 아직은 잘 모르겠어요. 그냥... 분위기를 느껴보고 싶었을 뿐이에요."
            "C의 대답은 마치 자신이 어떤 정체성을 찾고 있는 것처럼 느껴졌다."
        
        "C에게 다음 모임 때도 올 건지 물어본다":
            "나는 다음 모임에 올 건지 물어보았다."
            c "음… 아마도요. 아직 잘 모르겠지만, 한 번 해보려고요."
            "그의 모호한 대답 속에서 약간의 호기심과 망설임이 엿보였다."

    "그와의 대화가 끝나고, 나는 복잡한 마음으로 동아리 방을 떠났다."
    "모든 것이 새롭고 설레는 대학 생활 속에서, 앞으로 어떤 이야기가 펼쳐질지 기대가 되기 시작했다."
